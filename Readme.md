    ################################################################################
    #   __   __   ___   __   __  __                      GoSam                     #
    #  / _) /  \ / __) (  ) (  \/  )             An Automated One-Loop             #
    # ( (/\( () )\__ \ /__\  )    (             Matrix Element Generator           #
    #  \__/ \__/ (___/(_)(_)(_/\/\_)             Version 3.0.0                     #
    #                                                                              #
    #                                    (c) The GoSam Collaboration 2011-2025     #
    #                                                                              #
    #       AUTHORS:                                                               #
    #        * Jens Braun                       <jens.braun2@kit.edu>              #
    #        * Benjamin Campillo  Aveleira      <benjamin.campillo@kit.edu>        #
    #        * Gudrun Heinrich                  <gudrun.heinrich@kit.edu>          #
    #        * Marius Hoefer                    <marius.hoefer@kit.edu>            #
    #        * Stephen Jones                    <stephen.jones@durham.ac.uk>       #
    #        * Matthias Kerner                  <matthias.kerner@kit.edu>          #
    #        * Jannis Lang                      <jannis.lang@partner.kit.edu>      #
    #        * Vitaly Magerya                   <vitaly.magerya@tx97.net>          #
    #                                                                              #
    #        FORMER AUTHORS:                                                       #
    #          Gavin Cullen, Hans van Deurzen, Nicolas Greiner, Stephan Jahn,      #
    #          Gionata Luisoni, Pierpaolo Mastrolia, Edoardo Mirabella,            #
    #          Giovanni Ossola, Tiziano Peraro, Joscha Reichel, Thomas Reiter,     #
    #          Johannes Schlenk, Ludovic Scyboz, Johann Felix von Soden-Fraunhofen,#
    #          Francesco Tramontano                                                #
    #                                                                              #
    #  This program is free software: you can redistribute it and/or modify        #
    #  it under the terms of the GNU General Public License either                 #
    #  version 3, or (at your option) any later version.                           #
    #                                                                              #
    ################################################################################


# Synopsis

GoSam is a general one-loop evaluator for matrix elements.
The program produces Fortran 90 code from a given process
description by evaluating Feynman diagrams and translating
the associated one-loop diagrams into code suitable for the
evaluation with Ninja and/or Golem95.

# Prerequisites
* Installing GoSam and it's dependencies as well as building the generated Fortran code requires the
  [Meson](https://mesonbuild.com/Getting-meson.html) build system.
* Running GoSam requires at least Python version 3.9 (older versions of Python may work but are unsupported), to run
the Python code in parallel additionally the `multiprocess` package is required (available from [PyPI](https://pypi.org/project/multiprocess/)).
* To compile the dependencies and the generated code, a sufficiently modern Fortran compiler is required.
* Building GoSam with support for quadruple precision requires QuadNinja, which in turn requires `libquadmath`.

# Installation

GoSam is available from the public [GitHub repository](https://github.com/gudrunhe/gosam) or as a release tarball.

The git repository can be downloaded by running
```console
git clone
```
> [!WARNING]
> When pulling changes from the git repository, `meson`'s` build configuration has to be regenerated by running
> ```console
> meson setup --reconfigure
> ```
> in the `build` directory. Otherwise, the revision tag of the installation is not updated after pulling changes.

The tarball is available [here](https://github.com/gudrunhe/gosam/releases).
Then, in the cloned repository or the unpacked tarball, running
```console
meson setup build --prefix <prefix> [-Doption=value]
meson install -C build
```
will download, build and install
[QGRAF](http://cfif.tecnico.ulisboa.pt/~paulo/qgraf.html),
[Form](https://www.nikhef.nl/~form/),
[Golem95](https://github.com/gudrunhe/golem95) (optional),
[Ninja](https://github.com/peraro/ninja)
and GoSam. By default, only `Ninja` is installed. By optionally setting `-Doption=value`, the default build options can be altered.
The full list of build options is available by running `meson configure` in the `build` directory after running `meson setup`.
To avoid collisions with possible other installations of some of said programs, everything is installed into
a subfolder, e.g. `<prefix>/lib/GoSam/`. Only the main script, `gosam.py`, is directly installed to `<prefix>/bin`.
As of version 3, GoSam no longer requires an environment setup (formerly `gosam_setup_env.sh`), only `gosam.py` needs to
be found by the shell, e.g. by adding `<prefix>/bin` to `$PATH`.

> [!NOTE]
> Running `meson install -C build` will by default use all available processor cores. If this is undesired, the number
> of jobs can be chosen by running
> ```console
> meson compile -C build -j <jobs>
> meson install -C build
> ```
> instead.

> [!NOTE]
> By default, QuadNinja is built alongside Ninja. If this is undesired, QuadNinja can be disabled by setting
> `-Dquadninja=false` during setup.

> [!NOTE]
> By default, only Ninja is installed. If desired, Golem95 can be enabled by setting `-Dgolem95=true` during setup.

# Uninstalling GoSam
A GoSam-3 installation can be removed by running
```console
ninja gs-uninstall
```
in the `build` directory.

> [!CAUTION]
> This will remove the GoSam installation at `<prefix>` currently specified in the `build` folder. This procedure will
> not work if GoSam is installed and subsequently `meson configure` is called with a different `<prefix>` before
> running `ninja gs-uninstall`.

# Running GoSam
Running GoSam generally consists of two steps, the first one being the preparation of the process directory.
This is done by the Python program `gosam.py`. It supports two run modes, standalone mode and OLP
mode. In standalone mode, the process directory is generated by running
```console
gosam.py <process_card>.in
```
with an appropriate process card. This will generate a folder `<process_dir>` containing all files required for
generating the source code. For details on the process card and running GoSam in OLP mode, please consult the full
manual.

As a second step, the remaining source is generated and everything is compiled to a library. For this purpose, the
process directory contains a Meson build definition. In the process directory, running
```console
meson setup build --prefix <prefix>
meson install -C build
```
will generate the remaining source, build the process libraries and install them to `<prefix>`. If GoSam is run in
OLP-mode, additionally a script `build_olp_library.sh` is generated to run all build commands.

> [!CAUTION]
> GoSam communicates the location of the dependencies to the generated code via `meson`'s `pkg_config_path` option. This overrides the _default_ search location of `pkg-conf`, and is therefore overriden again by the environment variable `PKG_CONFIG_PATH` if it is set. This results in a compilation error for the process library. To circumvent this, the `PKG_CONFIG_PATH` variable can be removed by using the `unset` command, or the generated `<prefix>/gosam_setup_env.sh` can be loaded with the `source` command to add the required paths to `PKG_CONFIG_PATH`.

# References
Scientific publications using GoSam or any modified version of it or any code linking to GoSam or parts of it should make a clear reference to the publications:

 * G. Cullen, N. Greiner, G. Heinrich, G. Luisoni,
              P. Mastrolia, G. Ossola, T. Reiter, F. Tramontano,\
          _Automated One-Loop Calculations with GoSam_,\
		  Eur. Phys. J. C __72__ (2012), 1889 [[arXiv:1111.2034 [hep-ph]](https://arxiv.org/abs/1111.2034)].

*  G. Cullen,  H. van Deurzen, N. Greiner, G. Heinrich, G. Luisoni,
              P. Mastrolia, E. Mirabella, G. Ossola, T. Peraro, J. Schlenk,
	      J.F.von Soden-Fraunhofen, F. Tramontano,\
		  _GoSam-2.0: a tool for automated one-loop calculations within the Standard Model and Beyond_,\
		  Eur. Phys. J. C __74__ (2014) 8,  3001 [[arXiv:1404.7096 [hep-ph]](https://arxiv.org/abs/1404.7096)].

 * J. Braun, B. Campillo Aveleira, G. Heinrich, M. Hoefer, S.P. Jones, M. Kerner, J. Lang, V. Magerya,\
        _One-Loop Calculations in Effective Field Theories with GoSam-3.0_,\
        arXiv:2507.23549.
